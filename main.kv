#:kivy 2.1.0

<MyRoot>:
    user_name_input: user_name_input
    user_name_submit: user_name_submit
    hidden_word: hidden_word
    guess_input: guess_input
    guess_submit: guess_submit
    log_label_id: log_label_id
    new_game: new_game
    BoxLayout:
        orientation: "vertical"
        id: layout
        Label:
            text: "Hanged-man game"
            font_size: 30
            color: 0, 0.62, 0.96

        Label:
            id: hidden_word
            text: "_"
            font_size: 30
        
        Label:
            id: log_label_id
            font_size: 20
            opacity: 0
            disabled: True
            height: 0
            size_hint_y: None
            halign: 'center'

        TextInput:
            name: "userNameInput"
            id: user_name_input
            multiline: False
            on_text_validate: root.get_user_name(self, user_name_submit)

        Button:
            name: "userNameSubmit"
            id: user_name_submit
            text: "Submit"
            font_size: 15
            # Event managing
            on_press: root.get_user_name(user_name_input, self)
        
        TextInput:
            name: "guessInput"
            id: guess_input
            opacity: 0
            disabled: True
            height: 0
            size_hint_y: None
            multiline: False
            text_validate_unfocus: False
            on_text_validate: root.manage_guess(self)

        Button:
            name: "guessSubmit"
            id: guess_submit
            text: "Submit"
            font_size: 15
            opacity: 0
            disabled: True
            height: 0
            size_hint_y: None
            on_press: root.manage_guess(guess_input)

        Button:
            name: "newGame"
            id: new_game
            text: "New game"
            font_size: 15
            opacity: 0
            disabled: True
            height: 0
            size_hint_y: None
            on_press: root.start_game()

#:import Factory kivy.factory.Factory
<AskUserName@Popup>:
    auto_dismiss: False

    Button:
        text: "OK"
        on_press: root.user_input(user_name_input)
        on_release: root.dismiss()